<div class="row-fluid result<?=$this->driver->supportsAjaxStatus()?' ajaxItem':''?>">
<br/>
<input type="hidden" value="<?=$this->escapeHtml($this->driver->getUniqueID())?>" class="hiddenId" />
<input type="hidden" value="<?=$this->escapeHtml($this->driver->getResourceSource())?>" class="hiddenSource" />
 
  <div  id="texto" class="span7 middle">
    <div class="titlao"><p>
      <a href="<?=$this->recordLink()->getUrl($this->driver)?>" class="title">
      <?
        $summHighlightedTitle = $this->driver->getHighlightedTitle();
        $summTitle = $this->driver->getTitle();
        if (!empty($summHighlightedTitle)) {
          echo $this->highlight($this->addEllipsis($summHighlightedTitle, $summTitle));
        } else if (!empty($summTitle)) {
          echo $this->escapeHtml($this->truncate($summTitle, 180));
        } else {
          echo $this->transEsc('Title not available');
        }
      ?>
      </a>
    </p></div>

    <div>
      <? if($this->driver->isCollection()): ?>
        <?=implode('<br>', $this->driver->getSummary()); ?>
      <? else: ?>
        <? $summAuthor = $this->driver->getPrimaryAuthor(); if (!empty($summAuthor)): ?>
        <?=$this->transEsc('by')?>
        <a href="<?=$this->record($this->driver)->getLink('author', $summAuthor)?>"><?
          $summHighlightedAuthor = $this->driver->getHighlightedAuthor();
          echo !empty($summHighlightedAuthor)
              ? $this->highlight($summHighlightedAuthor)
              : $this->escapeHtml($summAuthor);
        ?></a>
        <? endif; ?>
       <div><p>Co-autor: <a href="#">Fulano de Tal</a></p></div>
       <div id="Detalhar" style="display:none">Resumo: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum at blandit dolor. Fusce volutpat ante at arcu efficitur sollicitudin. Donec at ante at nulla consequat tempus. Aliquam maximus massa sed ligula vestibulum, accumsan iaculis risus sollicitudin. Praesent enim erat, consequat non dolor nec, scelerisque luctus dui. Sed vulputate varius nunc eu mattis. Etiam tempor pretium turpis blandit ornare. Duis sapien magna, tempor id scelerisque ut, dictum vitae odio. Vestibulum pharetra finibus ipsum et ultricies.</div>
	   
	   <span class="glyphicon glyphicon-plus" aria-hidden="true"><button title="Clique para mostrar/ocultar" type="button" onclick="if(document.getElementById('Detalhar') .style.display=='none') {document.getElementById('Detalhar') .style.display=''}else{document.getElementById('Detalhar') .style.display='none'}">Detalhar</span></button>
        <? $journalTitle = $this->driver->getContainerTitle(); $summDate = $this->driver->getPublicationDates(); ?>
        <? if (!empty($journalTitle)): ?>
          <?=!empty($summAuthor) ? '<br />' : ''?>
          <?=/* TODO: handle highlighting more elegantly here */ $this->transEsc('Published in') . ' <a href="' . $this->record($this->driver)->getLink('journaltitle', str_replace(array('{{{{START_HILITE}}}}', '{{{{END_HILITE}}}}'), '', $journalTitle)) . '">' . $this->highlight($journalTitle) . '</a>';?>
          <?=!empty($summDate) ? ' (' . $this->escapeHtml($summDate[0]) . ')' : ''?>
        <? elseif (!empty($summDate)): ?>
          <?=!empty($summAuthor) ? '<br />' : ''?>
          <?=$this->transEsc('Published') . ' ' . $this->escapeHtml($summDate[0])?>
        <? endif; ?>
        <? $summInCollection = $this->driver->getContainingCollections(); if (!empty($summInCollection)): ?>
          <? foreach ($summInCollection as $collId => $collText): ?>
            <div>
              <b><?=$this->transEsc("in_collection_label")?></b>
              <a class="collectionLinkText" href="<?=$this->url('collection', array('id' => $collId))?>?recordID=<?=urlencode($this->driver->getUniqueID())?>">
                <?=$this->escapeHtml($collText)?>
              </a>
            </div>
          <? endforeach; ?>
        <? endif; ?>
      <? endif; ?>
    </div>

    <div>
      <? if(!$this->driver->isCollection()): ?>
        <? if ($snippet = $this->driver->getHighlightedSnippet()): ?>
          <? if (!empty($snippet['caption'])): ?>
            <strong><?=$this->transEsc($snippet['caption']) ?>:</strong> ';
          <? endif; ?>
          <? if (!empty($snippet['snippet'])): ?>
            <span class="quotestart">&#8220;</span>...<?=$this->highlight($snippet['snippet']) ?>...<span class="quoteend">&#8221;</span><br/>
          <? endif; ?>
         <? endif; ?>
        <br/>
      <? endif; ?>

      <div class="callnumAndLocation ajax-availability hide">
        <? if ($this->driver->supportsAjaxStatus()): ?>
          <strong class="hideIfDetailed"><?=$this->transEsc('Call Number')?>:</strong>
          <span class="callnumber ajax-availability hide">
            <?=$this->transEsc('Loading')?>...<br/>
          </span>
          <strong><?=$this->transEsc('Located')?>:</strong>
          <span class="location ajax-availability hide">
            <?=$this->transEsc('Loading')?>...
          </span>
          <div class="locationDetails"></div>
        <? else: ?>
          <? $summCallNo = $this->driver->getCallNumber(); if (!empty($summCallNo)): ?>
            <strong><?=$this->transEsc('Call Number')?>:</strong> <?=$this->escapeHtml($summCallNo)?>
          <? endif; ?>
        <? endif; ?>
      </div>

      <? /* We need to find out if we're supposed to display an OpenURL link ($openUrlActive),
            but even if we don't plan to display the link, we still want to get the $openUrl
            value for use in generating a COinS (Z3988) tag -- see bottom of file.
          */
        $openUrl = $this->driver->getOpenURL();
        $openUrlActive = $this->driver->openURLActive('results');
        $urls = $this->record($this->driver)->getLinkDetails();
        if ($openUrlActive || !empty($urls)): ?>
        <? if ($openUrlActive): ?>
          <br/>
          <?=$this->openUrl($openUrl)?>
          <? if ($this->driver->replaceURLsWithOpenURL()) $urls = array(); // clear URL list if replace setting is active ?>
        <? endif; ?>
        <? if (!is_array($urls)) $urls = array();
          if(!$this->driver->isCollection()):
            foreach ($urls as $current): ?>
              <a href="<?=$this->escapeHtml($this->proxyUrl($current['url']))?>" class="fulltext" target="new"><i class="icon-external-link"></i> <?=($current['url'] == $current['desc']) ? $this->transEsc('Get full text') : $this->escapeHtml($current['desc'])?></a><br/>
          <? endforeach; ?>
        <? endif; ?>
      <? endif; ?>

      <?=str_replace('class="', 'class="label label-info hide ', $this->record($this->driver)->getFormatList())?>
      
      <? if (!$openUrlActive && empty($urls) && $this->driver->supportsAjaxStatus()): ?>
        <span class="status ajax-availability small hide">
          <span class="label"><?=$this->transEsc('Loading')?>...</span>
        </span>
      <? endif; ?>
      <?=$this->record($this->driver)->getPreviews()?>
    </div>
  </div>

</div>
     <br/> 
<?=$openUrl?'<span class="Z3988" title="'.$this->escapeHtml($openUrl).'"></span>':''?>
